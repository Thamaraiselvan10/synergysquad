---
// src/components/Testimonials.astro

// --- START: NEW DATA FROM YOUR DOCUMENT ---
// This data is taken directly from the "Voices of Excellence" section of your PDF.
const testimonials = [
    {
        quote: "This weekly programming day challenge is a good initiative. It provides a great platform that is competitive and enhances our learning.",
        author: "Anuvarshini T R",
        class: "Topper, CSE-A",
        // LATER: Replace this with your local image: '/images/anuvarshini-tr.jpg'
        imageUrl: "https://i.pravatar.cc/150?u=AnuvarshiniTR" 
    },
    {
        quote: "Its really good to solve new pattern programs. I got few new ideas to solve the program, thanks for this assessment.",
        author: "Vijay K R",
        class: "Topper, CSE-C",
        // LATER: Replace this with your local image: '/images/vijay-kr.jpg'
        imageUrl: "https://i.pravatar.cc/150?u=VijayKR"
    },
    {
        quote: "Arrays are crucial in competitive programming. Today's assessment helped me handle array problems better. I enjoyed solving all the problems.",
        author: "Jeevanandhan J",
        class: "Topper, CSE-A",
        // LATER: Replace this with your local image: '/images/jeevanandhan-j.jpg'
        imageUrl: "https://i.pravatar.cc/150?u=JeevanandhanJ"
    },
    {
        quote: "This week's challenge helped me identify my weaknesses in this specific topic. I enjoyed solving various types of questions in Strings.",
        author: "Karthikeyan S",
        class: "Topper, CSE-B",
        // LATER: Replace this with your local image: '/images/karthikeyan-s.jpg'
        imageUrl: "https://i.pravatar.cc/150?u=KarthikeyanS"
    },
    {
        quote: "This MCQ assessment really makes me want to debug the code line by line and predict the output. Apart from coding, this helps me understand the concepts even deeper.",
        author: "Kiruthika V M",
        class: "Topper, CSE-B",
        // LATER: Replace this with your local image: '/images/kiruthika-vm.jpg'
        imageUrl: "https://i.pravatar.cc/150?u=KiruthikaVM"
    }
];
// --- END: NEW DATA FROM YOUR DOCUMENT ---
---

<div class="section-separator"></div>

<section class="testimonials">
    <div class="container">
        <div class="section-header fade-in-up">
            <h2 class="section-title">Voices of Excellence</h2>
            <p class="section-subtitle">
                Hear directly from our members about their experience and the impact of our weekly challenges.
            </p>
        </div>

        <div id="testimonials-slider" class="splide fade-in-up">
            <div class="splide__track">
                <ul class="splide__list">
                    {testimonials.map(testimonial => (
                        <li class="splide__slide">
                            <div class="testimonial-card">
                                <p class="quote">{testimonial.quote}</p>
                                <div class="author-info">
                                    <img src={testimonial.imageUrl} alt={testimonial.author} class="author-image" />
                                    <div class="author-details">
                                        <span class="author-name">{testimonial.author}</span>
                                        <span class="author-class">{testimonial.class}</span>
                                    </div>
                                </div>
                            </div>
                        </li>
                    ))}
                </ul>
            </div>
        </div>
    </div>
</section>

<style>
    /* All styles are correct and do not need to be changed */
    .section-separator { max-width: 1400px; margin: 0 auto; height: 1px; background-color: var(--border-color); }
    .testimonials { padding: 6rem 1.5rem; background-color: #ffffff; }
    .container { max-width: 1200px; margin: auto; }
    .section-header { text-align: center; margin-bottom: 4rem; }
    .section-title { font-size: 2.75rem; font-weight: 900; margin-bottom: 1rem; position: relative; display: inline-block; }
    .section-title::after { content: ''; position: absolute; bottom: -0.5rem; left: 50%; transform: translateX(-50%); height: 5px; width: 0; background: linear-gradient(90deg, var(--primary-color), #6366f1); border-radius: 5px; animation: grow-underline 1s ease-out forwards; animation-delay: 0.5s; }
    @keyframes grow-underline { to { width: 100px; } }
    .section-subtitle { max-width: 65ch; margin: auto; font-size: 1.125rem; color: var(--text-secondary); line-height: 1.8; }
    
    .splide { padding: 1rem 0 2.5rem; }
    .splide__slide { padding-bottom: 0; }

    .testimonial-card {
        background-color: #f8fafc;
        padding: 2.5rem 2.5rem 2rem;
        border-radius: 12px;
        border: 1px solid var(--border-color);
        box-shadow: 0 10px 25px -5px rgb(0 0 0 / 0.05);
        height: 100%; display: flex; flex-direction: column; justify-content: space-between; position: relative;
    }
    .testimonial-card::before {
        content: 'â€œ'; position: absolute; top: 1.75rem; left: 2rem; font-size: 6rem;
        color: var(--background-color); z-index: 1; line-height: 1;
    }
    .quote { font-size: 1.25rem; font-style: italic; color: var(--text-primary); line-height: 1.7; margin: 0 0 2.5rem 0; position: relative; z-index: 2; }
    .author-info { display: flex; align-items: center; gap: 1rem; position: relative; z-index: 2; }
    .author-image { width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 2px solid var(--border-color); }
    .author-details { display: flex; flex-direction: column; }
    .author-name { font-weight: 700; color: var(--text-primary); }
    .author-class { font-size: 0.9rem; color: var(--text-secondary); }
    
    .splide__pagination { bottom: 0; }
    .splide__pagination__page { background-color: #cbd5e1; }
    .splide__pagination__page.is-active { background-color: var(--primary-color); transform: scale(1.2); }
    .fade-in-up { opacity: 0; transform: translateY(30px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
    .fade-in-up.is-visible { opacity: 1; transform: translateY(0); }
    #testimonials-slider.fade-in-up { transition-delay: 0.2s; }
</style>

<script>
    import Splide from '@splidejs/splide';
    document.addEventListener('DOMContentLoaded', () => {
        const elements = document.querySelectorAll('.fade-in-up');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });
        elements.forEach(element => observer.observe(element));
        
        const testimonialsSlider = new Splide('#testimonials-slider', {
            type: 'loop',
            perPage: 2,
            gap: '2rem',
            arrows: false,
            pagination: true,
            autoplay: true,
            interval: 5000,
            breakpoints: {
                768: {
                    perPage: 1,
                },
            },
        });
        testimonialsSlider.mount();
    });
</script>